import{j as e,r as c}from"./index-BykSbo69.js";import{u as b,S as v}from"./SpecialistTitleScroller-VaMpOb9w.js";import{c as w}from"./createLucideIcon-Chjyi5cv.js";import{D as S}from"./DoctorCard-ChnqQnqb.js";import{A as C,m as f}from"./proxy-Bbsdzu_8.js";import{X as D}from"./x-BRU4J0zV.js";import"./Button-CjVJh0P3.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],T=w("search",k),A=({value:a,onChange:t,placeholder:s="Поиск…"})=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:a,onChange:r=>t(r.target.value),placeholder:s,className:"w-full py-3 pl-10 pr-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-[0.5px]"}),e.jsx(T,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer"})]}),E=({isOpen:a,doctor:t,onClose:s})=>{c.useEffect(()=>{if(a)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[a]);const r={date:"2025-06-10",time:"15:30",location:"Кабинет №12, ул. Пушкина 7, 1/2"};return e.jsx(C,{children:a&&e.jsxs(e.Fragment,{children:[e.jsx(f.div,{className:"fixed inset-0 z-50 bg-black/50",onClick:s,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}}),e.jsx(f.div,{className:"fixed inset-0 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:e.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-lg p-6",onClick:d=>d.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 cursor-pointer",children:e.jsx(D,{size:20})}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[t.photoUrl?e.jsx("img",{src:t.photoUrl,alt:t.name,className:"w-24 h-24 rounded-full object-cover shadow-sm"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-2xl text-gray-400",children:t.name[0]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.title}),e.jsxs("div",{className:"w-full rounded-lg text-left",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Ваша запись:"}),e.jsxs("p",{className:"text-sm",children:["Дата:"," ",e.jsx("span",{className:"font-medium",children:r.date})]}),e.jsxs("p",{className:"text-sm",children:["Время:"," ",e.jsx("span",{className:"font-medium",children:r.time})]}),e.jsxs("p",{className:"text-sm",children:["Место:"," ",e.jsx("span",{className:"font-medium",children:r.location})]})]}),e.jsx("button",{onClick:s,className:"mt-6 px-5 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition cursor-pointer",children:"Закрыть"})]})]})})]})})},j=450,L=550,G=()=>{const{titles:a,groupedAll:t,selectedTitle:s,setSelectedTitle:r,isLoading:d,isError:y}=b(),[m,g]=c.useState(""),[x,u]=c.useState(null),N=c.useMemo(()=>{const n=Object.values(t).flat().filter(l=>l.title.toLowerCase().includes(m.toLowerCase()));return(s?n.filter(l=>l.title===s):n).reduce((l,p)=>{var h;return(l[h=p.title]??(l[h]=[])).push(p),l},{})},[t,m,s]);return d?e.jsx("div",{className:"text-center py-10 text-xl text-gray-600",children:"Загрузка..."}):y?e.jsx("div",{className:"text-center py-10 text-red-500 text-xl",children:"Ошибка загрузки данных"}):e.jsxs("div",{className:"bg-[#f8f0e8] min-h-screen py-8 px-2",children:[e.jsxs("div",{className:"w-full mx-auto space-y-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{value:m,onChange:g,placeholder:"Поиск специалиста"}),e.jsx("div",{className:"overflow-x-auto pb-2",children:e.jsx(v,{titles:a,selectedTitle:s,onSelect:i=>r(n=>n===i?null:i)})})]}),Object.entries(N).map(([i,n])=>e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:i}),e.jsx("div",{className:"grid gap-4 justify-center",style:{gridTemplateColumns:`repeat(auto-fill, ${j}px)`},children:n.map(o=>e.jsx("div",{style:{width:j,height:L},className:"relative flex flex-col justify-between",children:e.jsx(S,{doctor:o,showButton:!0,onBookClick:()=>u(o)})},o.id))})]},i))]}),x&&e.jsx(E,{isOpen:!0,doctor:x,onClose:()=>u(null)})]})};export{G as default};
